<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- JAVA와 연결할 Mapper 파일 설정 -->
<mapper namespace="poly.persistance.mapper.IImageMapper">

	<!-- 게시판 리스트 쿼리 -->
	<select id="getImageList" resultType="ImageDTO">
		SELECT 
			IMAGE_NO, 
			SAVE_FILE_PATH, 
			REG_ID, 
			CHG_DT
		FROM circle.IMAGE_TABLE;
	</select>
	
	<select id="imageListTest" resultType="ImageDTO">
	SELECT
	
		IMAGE_NO, 
		SAVE_FOLDER_NAME, 
		SAVE_FILE_NAME, 
		ONE_TITLE, 
		REG_ID, 
		REG_DT  
		
	FROM circle.IMAGE_TABLE;
	</select>
	
	<insert id="getInsertImage" parameterType="ImageDTO">
		INSERT INTO circle.IMAGE_TABLE ( 
		
			SAVE_FILE_NAME,
			SAVE_FILE_PATH,
			ORG_FILE_NAME,
			SAVE_FOLDER_NAME,
			ONE_TITLE,
			EXT,
			REG_ID,
			CHG_ID
			
		 )  VALUES (
		 
			#{save_file_name},
			#{save_file_path},
			#{org_file_name},
			#{save_folder_name},
			#{one_title},
			#{ext},
			#{reg_id},
			#{reg_id}
		)

	</insert>
	
	<select id="searchList" parameterType="ImageDTO" resultType="ImageDTO">
	<!-- ajax를 위한 쿼리문 -->
	SELECT 
			IMAGE_NO, 
			SAVE_FOLDER_NAME, 
			SAVE_FILE_NAME,
			REG_ID, 
			LIKE_CNT,
			ONE_TITLE,
			CHG_DT
	FROM 
		circle.IMAGE_TABLE
	WHERE 
	 	IMAGE_NO LIKE '%' || #{image_no} || '%'
	</select>
	<update id="updateImage" parameterType="ImageDTO" >
	<!-- MyPage에서 사용하는 update -->
	
	UPDATE IMAGE_TABLE
	SET
		ONE_TITLE
	WHERE
		IMAGE_NO = #{image_no}
		
	</update>
	
	<delete id="delImage" parameterType="ImageDTO">
	<!-- MyPage에서 사용하는 delete -->
	
	</delete>
</mapper>