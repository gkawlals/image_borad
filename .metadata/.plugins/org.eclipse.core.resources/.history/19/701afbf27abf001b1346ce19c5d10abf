<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="poly.persistance.mapper.IUserMapper">

	<!-- 아이디 비밀번호를 기준으로 로그인  -->
	<select id="getUserLoginCheck" resultType="UserDTO">
		SELECT 
			USER_ID
			FROM circle.USER_TABLE
		WHERE USER_TABLE.USER_ID=#{user_id} AND USER_TABLE.USER_PWD=#{user_pwd}
	</select>

	<insert id="InsertUserInfo" parameterType="UserDTO" >
		INSERT INTO circle.USER_TABLE ( 
			USER_ID, 
			USER_NAME, 
			USER_PWD,
			USER_EMAIL,
			REG_ID,
			CHG_ID
		) VALUES ( 
			#{user_id},	
			#{user_name},
			#{user_pwd},
			#{user_email},
			#{user_id},
			#{user_id}	
			)
	</insert>

	<select id="getUserExists" parameterType="UserDTO" resultType="UserDTO">
		<!-- 이메일을 기준으로 중복체크   -->
		SELECT IF(COUNT(1), 'N','Y') AS EXISTS_YN
			FROM circle.USER_TABLE
		WHERE USER_TABLE.USER_EMAIL = #{user_email}

	</select>
	
	<select id="UserList" parameterType="UserDTO" resultType="UserDTO">
	
		SELECT 
		
			USER_NO,
			USER_ID,
			USER_FORDER_NAME,
			USER_PROFILE_NAME
			
		FROM circle.USER_TABLE;
		
	</select>
	
	<select id="getMyImageList" parameterType="ImageDTO" resultType="ImageDTO"> 
	
		SELECT
	
		IMAGE_NO, 
		SAVE_FOLDER_NAME, 
		SAVE_FILE_NAME, 
		ONE_TITLE, 
		REG_ID, 
		REG_DT  
		
		FROM circle.IMAGE_TABLE
		WHERE REG_ID = #{user_id}
		
	<!-- 여기서 관건인건 session으로 user_id를 받아와야한다. -->
	</select>
	
	<select id="userList" parameterType="UserDTO" resultType="UserDTO">
		SELECT 
			USER_NO,
			USER_ID,
			USER_FORDER_NAME,
			USER_PROFILE_NAME
		FROM circle.USER_TALBE
			WHERE USER_ID = #{user_id} 
			
	</select>
	

</mapper>